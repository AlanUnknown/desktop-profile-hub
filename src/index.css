@tailwind base;
@tailwind components;
@tailwind utilities;

/* Windows XP Luna Theme — Pixel-accurate recreation */
@import url('https://fonts.googleapis.com/css2?family=Tahoma:wght@400;700&display=swap');

@layer base {
  :root {
    --background: 210 40% 96%;
    --foreground: 220 20% 10%;
    --card: 0 0% 94%;
    --card-foreground: 220 20% 10%;
    --popover: 0 0% 94%;
    --popover-foreground: 220 20% 10%;
    --primary: 213 72% 44%;
    --primary-foreground: 0 0% 100%;
    --secondary: 210 20% 85%;
    --secondary-foreground: 220 20% 10%;
    --muted: 210 20% 88%;
    --muted-foreground: 220 10% 40%;
    --accent: 213 72% 44%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;
    --border: 210 20% 75%;
    --input: 210 20% 80%;
    --ring: 213 72% 44%;
    --radius: 0px;

    /* XP Specific */
    --titlebar-height: 26px;
    --icon-size: 72px;

    /* Classic shadows */
    --shadow-window: 2px 2px 8px hsl(0 0% 0% / 0.35);
    --shadow-icon: 1px 1px 2px hsl(0 0% 0% / 0.3);
    --shadow-taskbar: inset 0 1px 0 hsl(0 0% 100% / 0.3);

    /* Sidebar tokens (required by shadcn) */
    --sidebar-background: 210 40% 96%;
    --sidebar-foreground: 220 20% 10%;
    --sidebar-primary: 213 72% 44%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 213 72% 44%;
    --sidebar-accent-foreground: 0 0% 100%;
    --sidebar-border: 210 20% 75%;
    --sidebar-ring: 213 72% 44%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Tahoma', 'Microsoft Sans Serif', 'Segoe UI', sans-serif;
    font-size: 11px;
    overflow: hidden;
    -webkit-font-smoothing: none;
  }

  /* Classic XP scrollbar */
  ::-webkit-scrollbar {
    width: 17px;
    height: 17px;
  }

  ::-webkit-scrollbar-track {
    background: #f1efe2;
    border-left: 1px solid #aca899;
  }

  ::-webkit-scrollbar-thumb {
    background: linear-gradient(to right, #ece9d8 0%, #f5f3ea 40%, #ece9d8 100%);
    border: 1px solid #aca899;
    border-radius: 0;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(to right, #dcd8c0 0%, #ece9d8 40%, #dcd8c0 100%);
  }

  ::-webkit-scrollbar-button {
    background: #ece9d8;
    border: 1px solid #aca899;
    height: 17px;
    width: 17px;
  }
}

@layer components {

  /* =====================================================
     DESKTOP WALLPAPER — Bliss
     ===================================================== */
  .desktop-wallpaper {
    background: url('/images/bliss.png') center center / cover no-repeat;
    background-color: #3a6ea5; /* fallback XP blue */
  }

  /* =====================================================
     WINDOWS — XP Luna beveled frame
     ===================================================== */
  .window {
    background: #ece9d8;
    border-radius: 8px 8px 0 0;
    box-shadow: 0 0 0 1px #0054e3, 0 0 0 2px #002d7a, 3px 3px 12px hsl(0 0% 0% / 0.35);
    overflow: hidden;
    animation: window-open 0.12s ease-out;
  }

  .window-titlebar {
    height: var(--titlebar-height);
    background: linear-gradient(
      180deg,
      #0997ff 0%,
      #0673e9 3%,
      #0058d6 6%,
      #0154d0 10%,
      #0055d3 18%,
      #0058d6 28%,
      #005bda 38%,
      #005edd 48%,
      #0060e0 56%,
      #0061e1 64%,
      #0062e2 72%,
      #0062e3 80%,
      #0060df 88%,
      #005dd8 94%,
      #0054cc 100%
    );
    border-radius: 8px 8px 0 0;
    @apply flex items-center justify-between select-none;
    padding: 0 2px 0 4px;
    border-bottom: 1px solid #003c9e;
  }

  .window-title {
    @apply text-xs font-bold;
    color: white;
    text-shadow: 1px 1px 2px hsl(0 0% 0% / 0.6);
    letter-spacing: 0;
  }

  /* Title bar buttons cluster */
  .window-btn {
    width: 21px;
    height: 21px;
    @apply flex items-center justify-center text-xs font-bold;
    border-radius: 3px;
    color: white;
    text-shadow: 1px 1px 0 hsl(0 0% 0% / 0.3);
    /* Luna blue button gradient */
    background: linear-gradient(180deg, #3c8cf7 0%, #1d6ee3 45%, #1557c4 55%, #1148aa 100%);
    border: 1px solid #0f3377;
    box-shadow: inset 0 1px 0 hsl(0 0% 100% / 0.25);
  }

  .window-btn:hover {
    background: linear-gradient(180deg, #5ea8ff 0%, #3989f5 45%, #2d72de 55%, #1e5aba 100%);
  }

  .window-btn:active {
    background: linear-gradient(180deg, #1148aa 0%, #1557c4 50%, #3c8cf7 100%);
    box-shadow: inset 0 1px 2px hsl(0 0% 0% / 0.3);
  }

  .window-close-btn {
    background: linear-gradient(180deg, #e97f6a 0%, #d5432f 45%, #c62b18 55%, #b71807 100%) !important;
    border-color: #7c1800 !important;
  }

  .window-close-btn:hover {
    background: linear-gradient(180deg, #ff9e8c 0%, #e56450 45%, #d94835 55%, #c83520 100%) !important;
  }

  .window-close-btn:active {
    background: linear-gradient(180deg, #b71807 0%, #c62b18 50%, #e97f6a 100%) !important;
  }

  /* =====================================================
     DESKTOP ICONS — XP authentic style
     ===================================================== */
  .desktop-icon {
    @apply flex flex-col items-center gap-0.5 cursor-default select-none;
    width: var(--icon-size);
    padding: 4px 2px;
    border: 1px solid transparent;
    border-radius: 2px;
  }

  .desktop-icon:hover {
    background: hsl(213 70% 50% / 0.25);
    border-color: hsl(213 70% 50% / 0.6);
  }

  .desktop-icon:hover .desktop-icon-label {
    background: hsl(213 72% 44%);
    color: white;
    text-shadow: none;
  }

  .desktop-icon-image {
    @apply w-8 h-8 flex items-center justify-center;
    filter: drop-shadow(1px 2px 2px hsl(0 0% 0% / 0.45));
  }

  .desktop-icon-label {
    @apply text-center font-normal leading-tight px-0.5;
    font-size: 11px;
    color: white;
    text-shadow:
      1px 0 1px hsl(0 0% 0% / 0.9),
      -1px 0 1px hsl(0 0% 0% / 0.9),
      0 1px 1px hsl(0 0% 0% / 0.9),
      0 -1px 1px hsl(0 0% 0% / 0.9),
      1px 1px 2px hsl(0 0% 0% / 0.6);
    max-width: 68px;
    word-break: break-word;
    overflow-wrap: break-word;
  }

  /* =====================================================
     TASKBAR — XP Luna blue gradient
     ===================================================== */
  .taskbar {
    @apply fixed bottom-0 left-0 right-0 flex items-center;
    height: 30px;
    background: linear-gradient(
      180deg,
      #3168d5 0%,
      #4e8eea 2%,
      #2f61c5 4%,
      #2050b0 10%,
      #1941a5 40%,
      #1941a5 60%,
      #1b44a9 80%,
      #163b95 96%,
      #122e7a 100%
    );
    border-top: 1px solid #5c8fea;
    z-index: 9000;
  }

  .start-button {
    @apply flex items-center gap-1.5 h-full font-bold text-white;
    font-size: 11px;
    padding: 0 10px 0 6px;
    background: linear-gradient(
      180deg,
      #3cac39 0%,
      #45b842 2%,
      #3da23b 4%,
      #378e35 10%,
      #2d7f2b 40%,
      #267324 60%,
      #246e22 80%,
      #1f5f1d 96%,
      #195518 100%
    );
    border-radius: 0 10px 10px 0;
    border-right: 1px solid #1a5318;
    border-top: 1px solid #5fd75c;
    border-bottom: 1px solid #145213;
    text-shadow: 1px 1px 1px hsl(0 0% 0% / 0.5);
    font-style: italic;
    letter-spacing: 0.5px;
    box-shadow: inset 0 1px 0 hsl(120 60% 70% / 0.3);
  }

  .start-button:hover {
    background: linear-gradient(
      180deg,
      #4cc449 0%,
      #55c852 4%,
      #48b646 10%,
      #3ea03c 40%,
      #358d33 60%,
      #2d7e2b 80%,
      #267324 100%
    );
  }

  .start-button.active,
  .start-button:active {
    background: linear-gradient(
      180deg,
      #195518 0%,
      #1f5f1d 10%,
      #267324 40%,
      #2d7f2b 60%,
      #378e35 80%,
      #3da23b 96%,
      #45b842 100%
    );
    border-top: 1px solid #145213;
    border-bottom: 1px solid #5fd75c;
    box-shadow: inset 0 1px 2px hsl(0 0% 0% / 0.3);
  }

  /* =====================================================
     START MENU — XP two-column layout
     ===================================================== */
  .start-menu {
    position: absolute;
    bottom: 100%;
    left: 0;
    width: 380px;
    background: #ece9d8;
    border: 2px solid;
    border-color: #406dc9 #1a3b72 #1a3b72 #406dc9;
    border-radius: 6px 6px 0 0;
    box-shadow: 3px 3px 10px hsl(0 0% 0% / 0.4);
    z-index: 9999;
    overflow: hidden;
  }

  .start-menu-header {
    @apply flex items-center gap-3;
    padding: 8px 10px;
    background: linear-gradient(
      180deg,
      #1f5fce 0%,
      #1b56be 40%,
      #174eae 60%,
      #1245a0 100%
    );
    border-bottom: 1px solid #0d3577;
  }

  .start-menu-avatar {
    @apply w-12 h-12 rounded flex items-center justify-center flex-shrink-0;
    background: linear-gradient(135deg, #6e9ecf 0%, #3b6ba5 100%);
    border: 2px solid hsl(0 0% 100% / 0.5);
    box-shadow: 1px 1px 3px hsl(0 0% 0% / 0.3);
  }

  .start-menu-username {
    @apply font-bold text-white;
    font-size: 12px;
    text-shadow: 1px 1px 1px hsl(0 0% 0% / 0.5);
  }

  .start-menu-content {
    @apply flex;
    min-height: 280px;
  }

  .start-menu-left {
    @apply flex-1 p-1.5;
    background: white;
    border-right: 1px solid #d6d2c2;
  }

  .start-menu-right {
    @apply p-1.5;
    width: 145px;
    background: #d3e5fa;
  }

  .start-menu-item {
    @apply flex items-center gap-2 w-full text-left;
    padding: 3px 6px;
    font-size: 11px;
    color: #1e1e1e;
    border-radius: 2px;
  }

  .start-menu-item:hover {
    background: #316ac5;
    color: white;
  }

  .start-menu-separator {
    @apply my-1;
    border-top: 1px solid #d6d2c2;
  }

  .start-menu-footer {
    @apply flex justify-end gap-1;
    padding: 5px 8px;
    background: linear-gradient(
      180deg,
      #4582d9 0%,
      #2e6ac6 50%,
      #1d53a9 100%
    );
    border-top: 1px solid #5c8fea;
  }

  .start-menu-footer-btn {
    @apply flex items-center gap-1;
    padding: 3px 10px;
    font-size: 11px;
    background: linear-gradient(180deg, #f5f3ea 0%, #e5e0d0 50%, #d4cebb 100%);
    border: 1px solid #9e9a8d;
    border-radius: 3px;
    color: #1e1e1e;
    box-shadow: 0 1px 0 hsl(0 0% 100% / 0.3) inset;
  }

  .start-menu-footer-btn:hover {
    background: linear-gradient(180deg, #faf8f0 0%, #ece8da 50%, #ddd8c6 100%);
    border-color: #7a776c;
  }

  .start-menu-footer-btn:active {
    background: linear-gradient(180deg, #d4cebb 0%, #e5e0d0 50%, #f5f3ea 100%);
    box-shadow: inset 0 1px 2px hsl(0 0% 0% / 0.2);
  }

  /* Taskbar window buttons */
  .taskbar-window-btn {
    @apply flex items-center h-[22px] text-left;
    font-size: 11px;
    padding: 0 8px;
    min-width: 120px;
    max-width: 160px;
    background: linear-gradient(180deg, #3c8cf7 0%, #1d6ee3 45%, #1557c4 55%, #1148aa 100%);
    border: 1px solid #0f3377;
    border-radius: 2px;
    color: white;
    text-shadow: 1px 1px 0 hsl(0 0% 0% / 0.3);
    box-shadow: inset 0 1px 0 hsl(0 0% 100% / 0.2);
  }

  .taskbar-window-btn:hover {
    background: linear-gradient(180deg, #5ea8ff 0%, #3989f5 45%, #2d72de 55%, #1e5aba 100%);
  }

  .taskbar-window-btn:active {
    background: linear-gradient(180deg, #1148aa 0%, #1557c4 50%, #3c8cf7 100%);
    box-shadow: inset 0 1px 2px hsl(0 0% 0% / 0.3);
  }

  /* System tray */
  .system-tray {
    @apply flex items-center h-full px-3 ml-auto;
    background: linear-gradient(
      180deg,
      #1a8ee6 0%,
      #1679d0 4%,
      #1264b6 10%,
      #0f56a3 40%,
      #0d4e96 60%,
      #0b4688 80%,
      #093e7a 100%
    );
    border-left: 2px solid #0a3f7e;
    font-size: 11px;
  }

  /* =====================================================
     WORD DOCUMENT VIEW
     ===================================================== */
  .word-document {
    @apply bg-white max-w-[800px] mx-auto shadow-lg;
    min-height: 100%;
  }

  .word-document-page {
    @apply p-12;
    font-family: 'Times New Roman', Times, serif;
    line-height: 1.6;
  }

  .word-document h1 {
    @apply text-2xl font-bold text-center mb-6;
    color: hsl(220 20% 10%);
  }

  .word-document h2 {
    @apply text-lg font-bold mt-8 mb-3 pb-1 border-b-2;
    color: hsl(213 72% 44%);
    border-color: hsl(213 72% 44%);
  }

  .word-document p {
    @apply mb-3 text-sm;
    color: hsl(220 20% 20%);
  }

  .word-document ul {
    @apply list-disc pl-6 mb-4 text-sm;
    color: hsl(220 20% 20%);
  }

  .word-document li {
    @apply mb-1;
  }

  /* =====================================================
     MINESWEEPER
     ===================================================== */
  .minesweeper-game {
    @apply flex flex-col h-full;
    background: #ece9d8;
  }

  .minesweeper-menu {
    @apply flex gap-4 px-2 py-0.5;
    font-size: 11px;
    background: #ece9d8;
    border-bottom: 1px solid #aca899;
  }

  .minesweeper-menu-item {
    @apply cursor-pointer;
    color: hsl(var(--foreground));
  }

  .minesweeper-menu-item:hover {
    text-decoration: underline;
  }

  .minesweeper-container {
    @apply p-2;
  }

  .minesweeper-status {
    @apply flex items-center justify-between p-1 mb-2;
    background: #c0c0c0;
    border: 2px solid;
    border-color: #808080 #fff #fff #808080;
  }

  .minesweeper-counter {
    @apply font-mono text-xl font-bold px-1;
    background: #000;
    color: #ff0000;
    min-width: 50px;
    text-align: center;
    border: 1px solid;
    border-color: #404040 #e0e0e0 #e0e0e0 #404040;
  }

  .minesweeper-face {
    @apply text-xl p-1 cursor-pointer;
    background: #c0c0c0;
    border: 2px solid;
    border-color: #fff #808080 #808080 #fff;
  }

  .minesweeper-face:active {
    border-color: #808080 #fff #fff #808080;
  }

  .minesweeper-grid {
    @apply inline-block;
    border: 3px solid;
    border-color: #808080 #fff #fff #808080;
  }

  .minesweeper-cell {
    @apply w-6 h-6 flex items-center justify-center;
    font-size: 11px;
    background: #c0c0c0;
    border: 2px solid;
    border-color: #fff #808080 #808080 #fff;
  }

  .minesweeper-cell:active:not(.revealed) {
    border-color: #a0a0a0;
    background: #b0b0b0;
  }

  .minesweeper-cell.revealed {
    background: #c0c0c0;
    border: 1px solid #808080;
  }

  .minesweeper-cell.mine {
    background: #ff0000;
  }

  .minesweeper-overlay {
    @apply absolute inset-0 flex items-center justify-center;
    background: hsl(0 0% 0% / 0.5);
  }

  .minesweeper-message {
    @apply flex flex-col items-center gap-3 p-6 text-lg font-bold;
    background: #ece9d8;
    border: 2px solid;
    border-color: #fff #808080 #808080 #fff;
    color: hsl(var(--foreground));
  }

  .minesweeper-restart {
    @apply px-4 py-1;
    font-size: 11px;
    background: #ece9d8;
    border: 2px solid;
    border-color: #fff #808080 #808080 #fff;
    color: hsl(var(--foreground));
  }

  .minesweeper-restart:hover {
    background: #d4d0c0;
  }

  /* =====================================================
     LOGIN SCREEN — Pixel-accurate XP Welcome Screen
     ===================================================== */

  /* Root container — fills viewport */
  .xp-login {
    @apply fixed inset-0 flex flex-col;
    background: #5A7EDC;
    z-index: 10000;
    transition: opacity 0.6s ease-out;
    font-family: 'Tahoma', 'Microsoft Sans Serif', sans-serif;
    cursor: default;
  }

  .xp-login--fade {
    opacity: 0;
  }

  /* ── Top Banner — Dark blue with branding ── */
  .xp-login__top {
    display: flex;
    align-items: center;
    padding: 10px 20px 8px 20px;
    background: linear-gradient(
      180deg,
      #0F47A5 0%,
      #164CB5 20%,
      #1D5AC8 50%,
      #1856C0 80%,
      #1250B8 100%
    );
    min-height: 60px;
  }

  .xp-login__brand {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .xp-login__flag {
    width: 40px;
    height: 40px;
    filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.4));
  }

  .xp-login__brand-text {
    display: flex;
    flex-direction: column;
    gap: 0;
    line-height: 1;
  }

  .xp-login__microsoft {
    font-size: 9px;
    color: rgba(255,255,255,0.7);
    letter-spacing: 0.5px;
    font-weight: 400;
  }

  .xp-login__windows-text {
    font-size: 28px;
    font-weight: 700;
    color: white;
    letter-spacing: -0.5px;
    text-shadow: 1px 2px 3px rgba(0,0,0,0.4);
    font-family: 'Franklin Gothic Medium', 'Tahoma', sans-serif;
    font-style: italic;
  }

  .xp-login__xp {
    font-size: 34px;
    font-weight: 700;
    font-style: italic;
    color: #FF9900;
    margin-left: 3px;
    text-shadow: 1px 2px 3px rgba(0,0,0,0.35);
  }

  /* ── Gold separator lines ── */
  .xp-login__separator {
    height: 3px;
    background: linear-gradient(
      180deg,
      #D4A020 0%,
      #E8B830 40%,
      #C89018 100%
    );
    flex-shrink: 0;
  }

  /* ── Middle area — main content ── */
  .xp-login__middle {
    flex: 1;
    display: flex;
    align-items: center;
    background: linear-gradient(
      180deg,
      #5A7EDC 0%,
      #4E72D0 15%,
      #4568C4 30%,
      #3D5FB8 50%,
      #3656AE 70%,
      #2F4EA4 85%,
      #28469A 100%
    );
    padding: 0 40px;
  }

  .xp-login__welcome {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .xp-login__instruction {
    font-size: 20px;
    color: white;
    font-weight: 400;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
    letter-spacing: 0;
    font-family: 'Franklin Gothic Medium', 'Tahoma', sans-serif;
  }

  .xp-login__users {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: center;
    padding-left: 40px;
    border-left: 1px solid rgba(255,255,255,0.15);
  }

  /* ── User tile ── */
  .xp-login__user {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 16px 8px 8px;
    border: none;
    background: transparent;
    border-radius: 3px;
    cursor: pointer;
    transition: background 0.1s;
    width: 100%;
    max-width: 320px;
    text-align: left;
  }

  .xp-login__user:hover {
    background: rgba(255,255,255,0.12);
  }

  .xp-login__user--active {
    background: rgba(255,255,255,0.18) !important;
  }

  .xp-login__avatar {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    border-radius: 3px;
    overflow: hidden;
    box-shadow: 1px 1px 3px rgba(0,0,0,0.3);
    border: 2px solid rgba(255,255,255,0.4);
  }

  .xp-login__avatar svg {
    display: block;
  }

  .xp-login__user-info {
    display: flex;
    flex-direction: column;
  }

  .xp-login__username {
    font-size: 14px;
    font-weight: 700;
    color: white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
  }

  .xp-login__loading {
    font-size: 9px;
    color: rgba(255,255,255,0.6);
    margin-top: 2px;
  }

  /* ── Bottom bar ── */
  .xp-login__bottom {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 16px;
    background: linear-gradient(
      180deg,
      #2E56A8 0%,
      #264A98 40%,
      #1E3E88 70%,
      #183478 100%
    );
    min-height: 40px;
  }

  .xp-login__turnoff {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    background: none;
    border: none;
    border-radius: 3px;
    color: white;
    font-size: 11px;
    font-family: 'Tahoma', sans-serif;
    cursor: pointer;
    transition: background 0.1s;
  }

  .xp-login__turnoff:hover {
    background: rgba(255,255,255,0.1);
  }

  .xp-login__power-icon {
    width: 24px;
    height: 24px;
    background: linear-gradient(180deg, #4BA845 0%, #3A8835 50%, #2D6D2A 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #1E5518;
  }

  .xp-login__power-icon svg {
    width: 14px;
    height: 14px;
  }

  .xp-login__power-icon svg circle {
    stroke: white;
    stroke-width: 2;
  }

  .xp-login__power-icon svg rect {
    fill: white;
  }

  .xp-login__bottom-help {
    font-size: 10px;
    color: rgba(255,255,255,0.45);
    text-align: right;
    line-height: 1.4;
  }
}

@layer utilities {
  .no-drag {
    -webkit-user-drag: none;
    user-drag: none;
  }
}

/* Window animation */
@keyframes window-open {
  from { opacity: 0; transform: scale(0.96); }
  to { opacity: 1; transform: scale(1); }
}
